// Generated by CoffeeScript 1.4.0
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d;t=require("fs");o=function(e){var n,r,i,s,o,u,a;s={file:e,intro:[],imports:[],variables:[],functions:[]};i={currentLineNumber:0,inMultiLineComment:!1,endMultiLineComment:!1,parsingHeader:!1,functionOrAssignmentNext:!1,openingLine:-1,assignmentDocBuffer:[],assignmentBuffer:[]};r=t.readFileSync(e,"utf-8").split("\n");o=function(e,t,n){n.currentLineNumber=n.currentLineNumber+1;if(e.trim().length===0)return;return l(e,t,n)};for(u=0,a=r.length;u<a;u++){n=r[u];o(n,s,i)}return s};l=function(e,t,n){var r,i;if(c(e,t,n))return;if(n.endMultiLineComment){n.endMultiLineComment=!1;return}if(f(e,t,n))return;i=n.parsingHeader;n.parsingHeader=a(e,t,n);if(n.parsingHeader)return;i&&(n.functionOrAssignmentNext=!0);if(n.functionOrAssignmentNext){r=h(e,t,n);return r?n.functionOrAssignmentNext=!1:n.functionOrAssignmentNext=u(e,t,n)}};f=function(e,t,n){if(e.substr(0,1)!=="@")return!1;t.imports.push(e);return!0};h=function(t,n,r){var o;if(!i(t))return!1;s(t,r);o=e(r,"variable");o.shortName=o.assignment.substr(0,o.assignment.indexOf(" "));n.variables.push(o);p(r);return!0};u=function(t,r,i){var o;s(t,i);if(n(t)){o=e(i,"function");o.shortName=o.assignment.substr(0,o.assignment.indexOf("("));r.functions.push(o);i.functionOrAssignmentNext=!1;p(i);return!1}return!0};s=function(e,t){t.openingLine===-1&&(t.openingLine=t.currentLineNumber);return t.assignmentBuffer.push(e)};e=function(e,t){return{line:e.openingLine,assignment:e.assignmentBuffer.join("\n"),description:e.assignmentDocBuffer.join("\n"),type:t}};p=function(e){e.openingLine=-1;e.assignmentBuffer=[];return e.assignmentDocBuffer=[]};a=function(e,t,n){if(e.substr(0,2)!=="//")return!1;n.assignmentDocBuffer.push(d(e));return!0};c=function(e,t,n){if(e.substr(0,2)==="/*"){n.inMultiLineComment=!0;n.endMultiLineComment=!1;return!0}if(!n.inMultiLineComment)return!1;if(e.substr(-2)==="*/"){n.inMultiLineComment=!1;n.endMultiLineComment=!0;return!1}t.intro.push(e);return!0};r=function(e){return e.substr(0,4)==="    "};n=function(e){return e.indexOf(")")!==-1};i=function(e){return e.match(/^[a-z\-]+ *\?*=.*/im)};d=function(e){var t;t=e.trimLeft().substr(2);return t.substr(0,1)===" "?t.substr(1):t};module.exports=o}).call(this);